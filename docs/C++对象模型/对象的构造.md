## 对象的构造、拷贝和析构

------

### 对象的构造顺序

  从父类向下开始调用构造函数。构造函数中调用虚函数，那么直接调用该类的虚函数(静态方式调用)，不经由虚函数表，函数的查找顺序为由子类到父类。但是如果在构造函数调用虚函数中又调用了别的虚函数，那么后面的虚函数会经由虚函数表来调用。 

### 拷贝构造、赋值

当提供拷贝构造函数时，那么编译器不再提供缺省的构造函数，需要自己提供。

禁止对象的拷贝和赋值：函数私有化，并且只需要函数声明 。

### 析构

如果继承一个基类，基类中含有析构函数，为了调用父亲类的析构函数，编译器会给该类合成析构函数

如果有一个类成员变量，且其含有析构函数，那么为了调用该成员变量的析构函数，编译器也会合成一个析构函数

如果自己定义了析构函数，那么编译器会在当前的析构函数中进行扩展，需要扩展的情形同上。 

析构函数的执行顺序：先执行自身的析构函数，再调用父类和对象成员变量的析构函数。 

### 全局对象的构造和析构

局部对象在出了定义域之外后会调用析构函数，这种变量最好现用现定义。局部变量存放在堆栈汇总，对象内部的成员变量，如果没有赋初值，那么其为随机值。

### 全局对象的构造和析构

在main函数之前全局变量执行构造，在main执行就完毕后执行析构函数。这全局变量放在数据段，如果成员变量没有给初值，那么其初值为0；全局变量在编译阶段就会把空间分配出来

### 局部静态对象的构造和虚构

若局部静态对象的代码段没有执行机会，那该局部静态对象不会构造。静态局部对象也是在编译期间确定其内存地址。静态局部变量的初值默认值为0。局部静态对象的析构在main函数执行完毕之后(前提是局部静态对象被构造了)。局部静态对象无论其所处的代码段被执行了几次，对象只会被构造一次，编译器内部会储存一个标记，防止多次构造。当局部静态对象构造了之后，把该对象进行登记，在程序退出时，执行该对象的清理工作。

### 局部静态对象数组

编译器会做一定的优化(取决于编译器)，并不是在编译时直接把内存分配出去。分配内存：对象实际被使用时才会创建该对象。

